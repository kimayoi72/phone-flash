(this["webpackJsonpphone-flash"]=this["webpackJsonpphone-flash"]||[]).push([[0],[,,function(e){e.exports=JSON.parse('{"a":"phone-flash","b":"0.2.3"}')},,,function(e,n,t){e.exports=t.p+"static/media/logo.348672aa.svg"},function(e,n,t){e.exports=t(13)},,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(4),i=t.n(o),c=(t(11),t(1));var l=r.a.createContext({state:"denied",name:"microphone"}),s=function(e){var n=function(e){var n=Object(a.useState)((function(){return"denied"})),t=Object(c.a)(n,2),r=t[0],o=t[1];return navigator.permissions.query(e).then((function(e){o(e.state),e.onchange=function(){return o(e.state)}})),r}(e.permissionDescription);return r.a.createElement(l.Provider,{value:{state:n,name:e.permissionDescription.name}},e.children)},u=function(e){return Object(a.useContext)(l).state===e.state?r.a.createElement(a.Fragment,null,e.children):null},f=t(5),m=t.n(f),d=(t(12),t(2));var h=function(e){var n=Object(a.useMemo)((function(){return new window.AudioContext}),[]),t=function(e){var n=Object(a.useState)(),t=Object(c.a)(n,2),r=t[0],o=t[1],i=Object(a.useState)(),l=Object(c.a)(i,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(n){var t=e.createMediaStreamSource(n),a=e.createAnalyser();a.fftSize=256,a.smoothingTimeConstant=.85,a.minDecibels=-90,a.maxDecibels=-10;var r=e.createGain();r.gain.setValueAtTime(3,e.currentTime),t.connect(r),r.connect(a),o(t),u(a)}))}),[e]),[r,s]}(n),o=Object(c.a)(t,2)[1],i=Object(a.useRef)(null),l=Object(a.useMemo)((function(){return null!=i.current?i.current.getContext("2d"):null}),[i.current]);return n.resume(),Object(a.useEffect)((function(){if(null!==l&&void 0!==o&&null!==i.current){var e=i.current,n=e.width,t=e.height;!function e(){var a;l.clearRect(0,0,n,t),l.fillStyle="rgb(200, 200, 200, 0.25)",l.fillRect(0,0,n,t),o.fftSize=512,a=new Uint8Array(o.frequencyBinCount),o.getByteTimeDomainData(a),function(e,a){a.lineWidth=2,a.strokeStyle="rgba(255, 255, 0, 0.5)",a.beginPath();for(var r=1*n/e.length,o=0,i=0;i<e.length;i++,o+=r){var c=e[i]/128*t/2;0===i?a.moveTo(o,c):a.lineTo(o,c)}a.lineTo(n,t/2),a.stroke()}(a,l),o.getByteFrequencyData(a);for(var r=n/a.length,i=0,c=0;c<a.length;c+=4,i+=4*r+1){var s=(a[c+0]+a[c+1]+a[c+2]+a[c+3])/4/256*t,u=256*c*3/2/a.length;l.fillStyle="hsla(".concat(u,", 100%, 50%, ").concat(1,")"),l.fillRect(i,t-s,4*r,t)}requestAnimationFrame(e)}()}}),[n,o,l,i]),r.a.createElement(a.Fragment,null,r.a.createElement("canvas",{ref:i,style:{display:"block",width:"90vw",height:"auto"}}))},v=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:m.a,className:"App-logo",alt:"logo"})),r.a.createElement("div",{className:"App-main"},r.a.createElement(s,{permissionDescription:{name:"microphone"}},r.a.createElement(u,{state:"granted"},r.a.createElement("div",null,"Granted"),r.a.createElement(h,null)),r.a.createElement(u,{state:"denied"},r.a.createElement("div",null,"Denied")),r.a.createElement(u,{state:"prompt"},r.a.createElement("div",null,"Prompt"),r.a.createElement(h,null)))),r.a.createElement("footer",{className:"App-footer"},d.a," - ",d.b))},p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function g(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(v,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/phone-flash",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/phone-flash","/service-worker.js");p?(!function(e,n){fetch(e).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):g(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):g(n,e)}))}}()}],[[6,1,2]]]);
//# sourceMappingURL=main.94a86292.chunk.js.map