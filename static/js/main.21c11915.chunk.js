(this["webpackJsonpphone-flash"]=this["webpackJsonpphone-flash"]||[]).push([[0],[,,function(e){e.exports=JSON.parse('{"a":"phone-flash","b":"0.1.0"}')},,,function(e,t,n){e.exports=n(12)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),c=(n(10),n(1));var l=r.a.createContext({state:"denied",name:"microphone"}),u=function(e){var t=function(e){var t=Object(a.useState)((function(){return"denied"})),n=Object(c.a)(t,2),r=n[0],i=n[1];return navigator.permissions.query(e).then((function(e){i(e.state),e.onchange=function(){return i(e.state)}})),r}(e.permissionDescription);return r.a.createElement(l.Provider,{value:{state:t,name:e.permissionDescription.name}},e.children)},s=function(e){return Object(a.useContext)(l).state===e.state?r.a.createElement(a.Fragment,null,e.children):null},m=(n(11),n(2));var h=function(e){var t=Object(a.useMemo)((function(){return new window.AudioContext}),[]),n=function(e){var t=Object(a.useState)(),n=Object(c.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(),l=Object(c.a)(o,2),u=l[0],s=l[1];return Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){var n=e.createMediaStreamSource(t),a=e.createAnalyser();a.fftSize=256,a.smoothingTimeConstant=.75,a.minDecibels=-90,a.maxDecibels=-10;var r=e.createGain();r.gain.setValueAtTime(3,e.currentTime),n.connect(r),r.connect(a),i(n),s(a)}))}),[e]),[r,u]}(t),i=Object(c.a)(n,2)[1],o=Object(a.useRef)(null),l=Object(a.useMemo)((function(){return null!=o.current?o.current.getContext("2d"):null}),[o.current]);return t.resume(),Object(a.useEffect)((function(){if(null!==l&&void 0!==i&&null!==o.current){console.log("analyzer",i),console.log("Canvas",l);var e=o.current;!function t(){var n;l.clearRect(0,0,e.width,e.height),l.fillStyle="rgb(200, 200, 200)",l.fillRect(0,0,e.width,e.height),i.fftSize=1024,n=new Uint8Array(i.frequencyBinCount),i.getByteTimeDomainData(n),function(t,n){n.lineWidth=2,n.strokeStyle="rgb(255, 255, 0)",n.beginPath();for(var a=1*e.width/t.length,r=0,i=0;i<t.length;i++,r+=a){var o=t[i]/128*e.height/2;0===i?n.moveTo(r,o):n.lineTo(r,o)}n.lineTo(e.width,e.height/2),n.stroke()}(n,l),i.fftSize=1024,n=new Uint8Array(i.frequencyBinCount),i.getByteFrequencyData(n);for(var a=e.width/n.length,r=0,o=0;o<n.length;o++,r+=a+1){var c=n[o];l.fillStyle="rgb(".concat(3*c/2+50,", 50, 50)"),l.fillRect(r,e.height-c,a,e.height)}requestAnimationFrame(t)}()}}),[t,i,l,o]),r.a.createElement(a.Fragment,null,r.a.createElement("canvas",{ref:o,width:"800",height:"600"}))},f=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("main",{className:"App-main"},r.a.createElement(u,{permissionDescription:{name:"microphone"}},r.a.createElement(s,{state:"granted"},r.a.createElement("div",null,"Granted"),r.a.createElement(h,null)),r.a.createElement(s,{state:"denied"},r.a.createElement("div",null,"Denied")),r.a.createElement(s,{state:"prompt"},r.a.createElement("div",null,"Prompt"),r.a.createElement(h,null)))),r.a.createElement("footer",{className:"App-footer"},r.a.createElement("div",null,m.a," - ",m.b)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[5,1,2]]]);
//# sourceMappingURL=main.21c11915.chunk.js.map