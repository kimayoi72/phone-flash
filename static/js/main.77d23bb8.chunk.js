(this["webpackJsonpphone-flash"]=this["webpackJsonpphone-flash"]||[]).push([[0],[,,function(e){e.exports=JSON.parse('{"a":"phone-flash","b":"0.1.0"}')},,,function(e,t,n){e.exports=n.p+"static/media/logo.348672aa.svg"},function(e,t,n){e.exports=n(13)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(4),o=n.n(i),c=(n(11),n(1));var l=r.a.createContext({state:"denied",name:"microphone"}),s=function(e){var t=function(e){var t=Object(a.useState)((function(){return"denied"})),n=Object(c.a)(t,2),r=n[0],i=n[1];return navigator.permissions.query(e).then((function(e){i(e.state),e.onchange=function(){return i(e.state)}})),r}(e.permissionDescription);return r.a.createElement(l.Provider,{value:{state:t,name:e.permissionDescription.name}},e.children)},u=function(e){return Object(a.useContext)(l).state===e.state?r.a.createElement(a.Fragment,null,e.children):null},m=n(5),f=n.n(m),d=(n(12),n(2));var h=function(e){var t=Object(a.useMemo)((function(){return new window.AudioContext}),[]),n=function(e){var t=Object(a.useState)(),n=Object(c.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(),l=Object(c.a)(o,2),s=l[0],u=l[1];return Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){var n=e.createMediaStreamSource(t),a=e.createAnalyser();a.fftSize=256,a.smoothingTimeConstant=.85,a.minDecibels=-90,a.maxDecibels=-10;var r=e.createGain();r.gain.setValueAtTime(3,e.currentTime),n.connect(r),r.connect(a),i(n),u(a)}))}),[e]),[r,s]}(t),i=Object(c.a)(n,2)[1],o=Object(a.useRef)(null),l=Object(a.useMemo)((function(){return null!=o.current?o.current.getContext("2d"):null}),[o.current]);return t.resume(),Object(a.useEffect)((function(){if(null!==l&&void 0!==i&&null!==o.current){var e=o.current,t=e.width,n=e.height;console.log(e.width,e.scrollWidth,e.clientWidth);!function e(){var a;l.clearRect(0,0,t,n),l.fillStyle="rgb(200, 200, 200)",l.fillRect(0,0,t,n),i.fftSize=512,a=new Uint8Array(i.frequencyBinCount),i.getByteTimeDomainData(a),function(e,a){a.lineWidth=2,a.strokeStyle="rgb(255, 255, 0)",a.beginPath();for(var r=1*t/e.length,i=0,o=0;o<e.length;o++,i+=r){var c=e[o]/128*n/2;0===o?a.moveTo(i,c):a.lineTo(i,c)}a.lineTo(t,n/2),a.stroke()}(a,l),i.getByteFrequencyData(a);for(var r=t/a.length,o=0,c=0;c<a.length;c++,o+=r+1){var s=a[c];l.fillStyle="rgb(".concat(s+50,", 50, 50)"),l.fillRect(o,n-s,r,n)}requestAnimationFrame(e)}()}}),[t,i,l,o]),r.a.createElement(a.Fragment,null,r.a.createElement("canvas",{ref:o,style:{display:"block",width:"90vw",height:"auto"}}))},p=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"})),r.a.createElement("div",{className:"App-main"},r.a.createElement(s,{permissionDescription:{name:"microphone"}},r.a.createElement(u,{state:"granted"},r.a.createElement("div",null,"Granted"),r.a.createElement(h,null)),r.a.createElement(u,{state:"denied"},r.a.createElement("div",null,"Denied")),r.a.createElement(u,{state:"prompt"},r.a.createElement("div",null,"Prompt"),r.a.createElement(h,null)))),r.a.createElement("footer",{className:"App-footer"},d.a," - ",d.b))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[6,1,2]]]);
//# sourceMappingURL=main.77d23bb8.chunk.js.map